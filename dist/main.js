const y=()=>new Date().toLocaleTimeString("ru-RU"),s=t=>{console.log(y(),t)},m=t=>{console.error(y(),t.message)},g=async t=>new Promise(n=>setTimeout(()=>n(),t));async function a(t,n,e=1e3,f=10){const T=n??document;for(let c=0;c<f;c++){const u=T.querySelector(t);if(u!=null)return u;await g(e)}throw new Error(`Cannot find ${t}`)}const O=async()=>{const t=await a("div.front-page-carousel",void 0,300,20),n=await a("video",t,300,20);n.onplay=()=>n.pause();const e=t.parentElement;e==null||e.removeChild(t)},b=document.querySelector("title");let o=null,i=null;const h=t=>{if(!b)throw new Error("pageTitleElement is null");o!=null&&(o.disconnect(),o=null,s("Old titleObserver killed")),o=new MutationObserver(()=>{i&&clearTimeout(i),i=setTimeout(()=>{t()},1500)}),o.observe(b,{childList:!0}),s("Started titleObserver")};let v,r;const w=1e3*60,p=w*15,E=async()=>{await A(),l()},A=async()=>{v=await a("div.chat-input__buttons-container"),s("buttons panel initialized")},L=()=>[...v.querySelectorAll("button")].find(e=>e.ariaLabel&&e.ariaLabel.toLocaleLowerCase()=="claim bonus"),l=()=>{r&&clearTimeout(r);const t=L();t?(t.click(),r=setTimeout(l,p),s("button used")):(r=setTimeout(l,w),s("button missing"))},d=async()=>{const t=E(),n=O();try{await t}catch(e){m(e)}try{await n}catch(e){m(e)}};setTimeout(async()=>{await d(),h(d)});
