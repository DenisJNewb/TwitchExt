const d=()=>new Date().toLocaleTimeString("ru-RU"),s=t=>{console.log(d(),t)},b=t=>{console.error(d(),t.message)},g=async t=>new Promise(e=>setTimeout(()=>e(),t));async function a(t,e,n=1e3,f=10){const T=e??document;for(let c=0;c<f;c++){const u=T.querySelector(t);if(u!=null)return u;await g(n)}throw new Error(`Cannot find ${t}`)}const O=async()=>{const t=await a("div.front-page-carousel",void 0,300,20),e=await a("video",t,300,20);e.onplay=()=>e.pause()},m=document.querySelector("title");let o=null,r=null;const p=t=>{if(!m)throw new Error("pageTitleElement is null");o!=null&&(o.disconnect(),o=null,s("Old titleObserver killed")),o=new MutationObserver(()=>{r&&clearTimeout(r),r=setTimeout(()=>{t()},1500)}),o.observe(m,{childList:!0}),s("Started titleObserver")};let w,i;const v=1e3*60,h=v*15,A=async()=>{await E(),l()},E=async()=>{w=await a("div.chat-input__buttons-container"),s("buttons panel initialized")},L=()=>[...w.querySelectorAll("button")].find(n=>n.ariaLabel&&n.ariaLabel.toLocaleLowerCase()=="claim bonus"),l=()=>{i&&clearTimeout(i);const t=L();t?(t.click(),i=setTimeout(l,h),s("button used")):(i=setTimeout(l,v),s("button missing"))},y=async()=>{const t=A(),e=O();try{await t}catch(n){b(n)}try{await e}catch(n){b(n)}};setTimeout(async()=>{await y(),p(y)});
